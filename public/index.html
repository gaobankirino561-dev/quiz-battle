<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>オンラインクイズバトル</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="app">
    <h1>オンラインクイズバトル</h1>

    <section id="name-section">
      <label>
        プレイヤー名:
        <input type="text" id="playerNameInput" placeholder="なまえ">
      </label>
    </section>

    <section id="room-section" class="top-panel">
      <button id="createRoomBtn">ルーム作成</button>
      <input type="text" id="roomIdInput" placeholder="ルームID">
      <button id="joinRoomBtn">参加</button>
      <p id="roomInfo"></p>

      <div id="room-settings">
        <h3>ルーム設定（ホストのみ有効）</h3>

        <div class="field-row">
          <!-- ジャンル選択 -->
          <div class="rule-row">
            <label>ジャンル</label>
            <div id="genre-options">
              <label><input type="checkbox" name="genre" value="general"> 一般</label>
              <label><input type="checkbox" name="genre" value="conan"> 名探偵コナン</label>
              <label><input type="checkbox" name="genre" value="dragonball"> ドラゴンボール</label>
            </div>
            <button type="button" id="genre-all-toggle">ALL</button>
          </div>
        </div>

        <div class="field-row">
          <span>出題難易度:</span>
          <label><input type="checkbox" class="difficultyCheckbox" value="EASY" checked> EASY</label>
          <label><input type="checkbox" class="difficultyCheckbox" value="NORMAL" checked> NORMAL</label>
          <label><input type="checkbox" class="difficultyCheckbox" value="HARD"> HARD</label>
        </div>

        <div class="field-row">
          <label>
            出題数:
            <input type="number" id="maxRoundsInput" min="1" max="50" value="10">
          </label>
          <label>
            <input type="checkbox" id="infiniteModeCheckbox">
            ∞モード（どちらかのHPが0になるまで）
          </label>
        </div>

        <div class="field-row">
          <label>
            1問あたりの制限時間（秒）:
            <input type="number" id="timeLimitInput" min="5" max="120" value="30">
          </label>
        </div>

        <div class="field-row">
          <label for="player-count">参加人数</label>
          <select id="player-count">
            <option value="2" selected>2人</option>
            <option value="3">3人</option>
          </select>
        </div>
      </div>
    </section>

    <section id="status-section" class="top-panel">
      <p id="connectionStatus">サーバー接続中...</p>
      <p id="gameStatus"></p>
    </section>

    <section id="hp-section" class="hidden top-panel">
      <h3>HP状況</h3>
      <div id="hp-status"></div>
    </section>

    <section id="hp-config-section" class="hidden">
      <h2>初期HP設定（ホストのみ操作）</h2>
      <p id="hpConfigInfo"></p>
      <div id="hpInputsContainer"></div>
      <button id="startGameWithHpBtn">この設定でゲーム開始</button>
      <p id="hpConfigStatus"></p>
    </section>

    <section id="question-section" class="hidden">
      <p id="roundInfo"></p>
      <p id="timerText"></p>
      <div class="game-main">
        <div id="countdown-overlay" class="countdown hidden">
          <div class="countdown-inner">
            <div id="countdown-number">3</div>
            <div id="countdown-label"></div>
          </div>
        </div>
        <div id="questionContainer" class="question-box question-area">
          <h2 id="questionText"></h2>
          <div id="questionRules"></div>
        </div>
        <div class="choices-area">
          <ul id="choicesList"></ul>
          <button id="skipAnswerBtn" class="hidden">回答スキップ</button>
        </div>
      </div>
    </section>

    <section id="result-section" class="hidden">
      <h2>ラウンド結果</h2>
      <p id="roundResultText"></p>
      <p id="correctAnswerText"></p>
      <div id="round-result-panel">
        <h3>ラウンド結果（ダメージの低い順）</h3>
        <ul id="round-result-list"></ul>
      </div>
      <button id="nextRoundBtn" class="hidden">次の問題へ</button>
      <div class="ready-bar hidden">
        <button id="nextReadyBtn" class="hidden">次の問題へ（準備完了）</button>
        <p id="nextWaitText"></p>
      </div>
    </section>

    <section id="final-section" class="hidden">
      <h2 id="finalResultTitle"></h2>
      <p id="finalResultDetail"></p>
      <div class="replay-actions">
        <button id="replay-ready-button" class="hidden">再戦準備完了</button>
        <button id="replay-start-button" class="hidden">再ゲーム開始（ホスト専用）</button>
      </div>
      <button id="reloadBtn">最初から</button>
    </section>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="client.js"></script>
</body>
</html>
